{"version":3,"sources":["file:///E:/CocosProjects/Color/assets/ts-gameframework-master/servers/src/shared/tsgfServer/ApiBase.ts"],"names":["apiErrorThenClose","call","msg","info","closeReason","error","conn","close","apiSuccThenClose","res","succ"],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZO,iBAAeA,iBAAf,CACHC,IADG,EACmCC,GADnC,EACgDC,IADhD,EACgFC,WADhF,EACqH;AACxH,UAAMH,IAAI,CAACI,KAAL,CAAWH,GAAX,EAAgBC,IAAhB,CAAN;AACAF,IAAAA,IAAI,CAACK,IAAL,CAAUC,KAAV,CAAgBH,WAAhB;AACH;;AASM,iBAAeI,gBAAf,CACHP,IADG,EACmCQ,GADnC,EAC6CL,WAD7C,EACkF;AACrF,UAAMH,IAAI,CAACS,IAAL,CAAUD,GAAV,CAAN;AACAR,IAAAA,IAAI,CAACK,IAAL,CAAUC,KAAV,CAAgBH,WAAhB;AACH;;;;;;;;;;;;;;;uBAjBqBJ,iB;sBAaAQ","sourcesContent":["import { ApiCall, BaseServiceType, TsrpcErrorData } from \"tsrpc\";\n\n/**\n * 返回错误并随后关闭连接\n * @typeParam req \n * @typeParam res \n * @param call \n * @param msg \n * @param info\n * @param closeReason\n * @returns\n */\nexport async function apiErrorThenClose<req, res, ServiceType extends BaseServiceType = any>(\n    call: ApiCall<req, res, ServiceType>, msg: string, info?: Partial<TsrpcErrorData>, closeReason?: string): Promise<void> {\n    await call.error(msg, info);\n    call.conn.close(closeReason);\n}\n/**\n * 返回成功并随后关闭连接\n * @typeParam req \n * @typeParam res \n * @param call \n * @param closeReason\n * @returns\n */\nexport async function apiSuccThenClose<req, res, ServiceType extends BaseServiceType = any>(\n    call: ApiCall<req, res, ServiceType>, res: res, closeReason?: string): Promise<void> {\n    await call.succ(res);\n    call.conn.close(closeReason);\n}"]}