{"version":3,"sources":["file:///E:/CocosProjects/Color/assets/ts-gameframework-master/servers/src/hallServer/api/ApiQueryMatch.ts"],"names":["ApiQueryMatch","call","ret","getHallServer","matchRequestTerminal","queryMatch","conn","currPlayer","authInfo","appId","req","matchReqId","succ","hasResult","errMsg","err","errCode","code","matchResult","data"],"mappings":";;;;;;;;;WAIsBA,a;;;;;uCAAf,WAA6BC,IAA7B,EAA8E;AACjF,UAAIC,GAAG,SAASD,IAAI,CAACE,aAAL,GAAqBC,oBAArB,CACXC,UADW,CACAJ,IAAI,CAACK,IAAL,CAAUC,UAAV,CAAqBC,QAArB,CAA8BC,KAD9B,EACqCR,IAAI,CAACS,GAAL,CAASC,UAD9C,CAAhB;;AAEA,UAAIT,GAAG,KAAK,IAAZ,EAAkB;AACd;AACA,qBAAaD,IAAI,CAACW,IAAL,CAAU;AACnBC,UAAAA,SAAS,EAAE;AADQ,SAAV,CAAb;AAGH;;AACD,UAAI,CAACX,GAAG,CAACU,IAAT,EAAe;AACX,qBAAaX,IAAI,CAACW,IAAL,CAAU;AACnBC,UAAAA,SAAS,EAAE,IADQ;AAEnBC,UAAAA,MAAM,EAAEZ,GAAG,CAACa,GAFO;AAGnBC,UAAAA,OAAO,EAAEd,GAAG,CAACe;AAHM,SAAV,CAAb;AAKH;;AACD,mBAAahB,IAAI,CAACW,IAAL,CAAU;AACnBC,QAAAA,SAAS,EAAE,IADQ;AAEnBK,QAAAA,WAAW,EAAEhB,GAAG,CAACiB;AAFE,OAAV,CAAb;AAIH,K;;;;;;;;;;;;;;;;2BApBqBnB,a","sourcesContent":["import { ApiCall } from \"tsrpc\";\nimport { ReqQueryMatch, ResQueryMatch } from \"../../shared/hallClient/protocols/PtlQueryMatch\";\nimport { HallApiCall } from \"../HallServer\";\n\nexport async function ApiQueryMatch(call: HallApiCall<ReqQueryMatch, ResQueryMatch>) {\n    let ret = await call.getHallServer().matchRequestTerminal\n        .queryMatch(call.conn.currPlayer.authInfo.appId, call.req.matchReqId);\n    if (ret === null) {\n        //失败的结果\n        return await call.succ({\n            hasResult: false\n        });\n    }\n    if (!ret.succ) {\n        return await call.succ({\n            hasResult: true,\n            errMsg: ret.err,\n            errCode: ret.code,\n        });\n    }\n    return await call.succ({\n        hasResult: true,\n        matchResult: ret.data,\n    });\n}"]}